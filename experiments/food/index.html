<!DOCTYPE html>
<html lang="en-us" prefix="og: http://ogp.me/ns#">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />

	<!-- FB Open Graph Tags -->
	<meta property="fb:app_id"       content="638458746355035" />
	<meta property="og:url"          content="http://lab.callaunchpad.org" />
	<meta property="og:type"         content="website" />
	<meta property="og:title"        content="Web Experiments by Launchpad." />
	<meta property="og:description"  content="Online lab of live demos and web experiments." />
	<!-- TODO: Update image -->
	<meta property="og:image"        content="http://callaunchpad.org//img/og_image.png" />

	<!-- Meta Tags for SEO -->
	<title>Web Experiments by Launchpad</title>
	<meta name='subject' content='Software' />
	<meta name='description' content='Online lab of live demos and web experiments.' />
	<meta name='keywords' content='intelligent, software, machine learning, artificial intelligence, data science, Berkeley, Cal, Sherlock, Whisper, Lively, Launchpad' />
	<meta name='url' content='http://lab.callaunchpad.org' />
	<meta name='reply-to' content='team@callaunchpad.org' />
	<meta name='copyright' content='Launchpad' />
	<meta name='robots' content='index, follow' />

	<!-- FAVICON -->
	<link rel="apple-touch-icon" sizes="57x57" href="../../img/favicon/apple-icon-57x57.png?v=2">
	<link rel="apple-touch-icon" sizes="60x60" href="../../img/favicon/apple-icon-60x60.png?v=2">
	<link rel="apple-touch-icon" sizes="72x72" href="../../img/favicon/apple-icon-72x72.png?v=2">
	<link rel="apple-touch-icon" sizes="76x76" href="../../img/favicon/apple-icon-76x76.png?v=2">
	<link rel="apple-touch-icon" sizes="114x114" href="../../img/favicon/apple-icon-114x114.png?v=2">
	<link rel="apple-touch-icon" sizes="120x120" href="../../img/favicon/apple-icon-120x120.png?v=2">
	<link rel="apple-touch-icon" sizes="144x144" href="../../img/favicon/apple-icon-144x144.png?v=2">
	<link rel="apple-touch-icon" sizes="152x152" href="../../img/favicon/apple-icon-152x152.png?v=2">
	<link rel="apple-touch-icon" sizes="180x180" href="../../img/favicon/apple-icon-180x180.png?v=2">
	<link rel="icon" type="image/png" sizes="192x192"  href="../../img/favicon/android-icon-192x192.png?v=2">
	<link rel="icon" type="image/png" sizes="32x32" href="../../img/favicon/favicon-32x32.png?v=2">
	<link rel="icon" type="image/png" sizes="96x96" href="../../img/favicon/favicon-96x96.png?v=2">
	<link rel="icon" type="image/png" sizes="16x16" href="../../img/favicon/favicon-16x16.png?v=2">
	<link rel="manifest" href="../../img/favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="favicon/ms-icon-144x144.png?v=2">
	<meta name="theme-color" content="#ffffff">

	<link rel="stylesheet" href="../../css/style.css">
	<link rel="stylesheet" href="./css/hover.css">
	</head>
	<body>
	<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>










<!-- PLEASE EDIT THE METADATA -->

<div class="parallax-container">
  <div class="parallax">
    <div class="title-cover valign-wrapper">
      <div class="text-container valign center">
        <h3 class="white-text">Food Recognition</h3>
        <p class="white-text">Web experiment that uses Convolutional Neural Networks to identify food.</p>
      </div>
    </div>
    <img class="cover-img" src="../../img/backgrounds/star-background.jpg">
  </div>
</div>

<div class="experiment container center grey lighten-5 z-depth-5">









<!-- BEGIN EXPERIMENT -->

<script type='text/javascript' src="https://sdk.clarifai.com/js/clarifai-latest.js"></script>
<script>

// var Clarifai = require('clarifai');

var app = new Clarifai.App(
  'tGGDtLFpJ32BICNLqW95E12Kwa2hyBOpWJ2SQhVH',
  '9-2tMR0EtcU7bwhQMvFmfvAPd_pGD1nfGEVCpDRq'
);

// predict the contents of an image by passing in a url


function main()
{
    var inputFileToLoad = document.createElement("input");
    inputFileToLoad.type = "file";
    inputFileToLoad.id = "inputFileToLoad";
    document.body.appendChild(inputFileToLoad);

    var buttonLoadFile = document.createElement("button");
    buttonLoadFile.onclick = loadImageFileAsURL;
    buttonLoadFile.textContent = "Load Selected File";
    document.body.appendChild(buttonLoadFile);
}

function loadImageFileAsURL()
{
    var filesSelected = document.getElementById("inputFileToLoad").files;
    if (filesSelected.length > 0)
    {
        var fileToLoad = filesSelected[0];

        if (fileToLoad.type.match("image.*"))
        {
            var fileReader = new FileReader();
            fileReader.onload = function(fileLoadedEvent) 
            {
                var imageLoaded = document.createElement("img");
                imageLoaded.src = fileLoadedEvent.target.result;
                console.log(imageLoaded.src)
                
    			// imageLoaded.style.backgroundPosition = "top right";
    			// console.log("IM HERE");
    			if (document.body.childNodes.length == 0) {
    				document.body.appendChild(imageLoaded);
    			} else {
    				document.body.replaceChild(imageLoaded, document.body.childNodes[0]);
    			}
    			app.models.predict(Clarifai.FOOD_MODEL, {base64: imageLoaded.src.slice(23)}).then(
				  function(response) {
				  	string = ""
				  	predictions  = response.rawData.outputs[0].data.concepts;
				  	for (i = 0; i < predictions.length; i++) {
				  		string = string + predictions[i].name + ": " + predictions[i].value.toString() +'\n';
				  		console.log(predictions[i].name)
				  		console.log(predictions[i].value)
				  	}

				  	document.getElementById("result").innerHTML = string;

				    // console.log(response.rawData.outputs[0].data.concepts);
				  },
				  function(err) {
				    console.error(err);
				  }
				);
				imageLoaded.style.height = "200px";
    			imageLoaded.style.width = "200px";

                
            };
            fileReader.readAsDataURL(fileToLoad);
        }
    }
}

main();
	



</script>

<p id = "result">This is where the predictions will go</p>

<!-- END EXPERIMENT -->










<style type="text/css">
	body {
	background-image: linear-gradient(90deg, rgba(194, 233, 221, 0.5) 1%,
					  rgba(104, 119, 132, 0.5) 100%),
					  linear-gradient(-90deg, #494d71 0%, rgba(217, 230, 185, 0.5) 80%);
	}
</style>

		<script>
			(function($) {
				$('.parallax').parallax();
			})(jQuery);
		</script>
</div>
</body>
</html>
